var accList=document.querySelectorAll(".acc"),navigation=document.querySelector(".navigation"),toggle=document.querySelector("#toggle"),header=document.querySelector(".page-header"),filters=document.querySelector(".filters"),filtersToggle=document.querySelector(".main-catalog__toggle");navigation.classList.remove("navigation--opened"),header.classList.remove("page-header--colored"),toggle.addEventListener("change",function(){this.checked?(navigation.classList.add("navigation--opened"),header.classList.add("page-header--colored")):(navigation.classList.remove("navigation--opened"),header.classList.remove("page-header--colored"))});for(var i=0;i<accList.length;i++){var acc=accList[i];acc.classList.remove("nojs"),acc.addEventListener("click",function(e){if(e.target.checked)for(var o=0;o<accList.length;o++)accList[o].checked=accList[o]===e.target})}filters&&(filters.classList.remove("filters--nojs"),filtersToggle.addEventListener("click",function(){filters.classList.toggle("filters--opened"),filtersToggle.classList.toggle("main-catalog__toggle--none")}));var userEmail,ESC_KEYCODE=27,loginElem=document.querySelector(".login"),openBtn=document.querySelector(".page-header__login"),openNavDtn=document.querySelector(".navigation__login"),overlayElem=document.querySelector(".login__overlay"),closeBtn=document.querySelector(".login__close-btn");function onEscKeyDown(e){e.keyCode===ESC_KEYCODE&&(loginElem.classList.add("login--closed"),document.body.classList.remove("stop-scrolling"))}function closelogin(){loginElem.classList.contains("login--closed")||(loginElem.classList.add("login--closed"),document.removeEventListener("keydown",onEscKeyDown),document.body.classList.remove("stop-scrolling"))}try{localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}(openBtn||openNavDtn)&&(userEmail=loginElem.querySelector("[id=login-email]"),openNavDtn.addEventListener("click",function(e){e.preventDefault(),document.body.classList.add("stop-scrolling"),loginElem.classList.contains("login--closed")&&(loginElem.classList.remove("login--closed"),document.addEventListener("keydown",onEscKeyDown)),userEmail.focus()}),openBtn.addEventListener("click",function(e){e.preventDefault(),document.body.classList.add("stop-scrolling"),loginElem.classList.contains("login--closed")&&(loginElem.classList.remove("login--closed"),document.addEventListener("keydown",onEscKeyDown)),userEmail.focus()}),loginElem.addEventListener("submit",function(e){""===!userEmail.value?(e.preventDefault(),loginElem.classList.remove("login-error"),loginElem.offsetWidth,loginElem.classList.add("login-error"),userEmail.value||userEmail.focus()):isStorageSupport&&localStorage.setItem("userEmail",userEmail.value)})),closeBtn.addEventListener("click",closelogin),overlayElem.addEventListener("click",closelogin);var modalElem=document.querySelector(".modal"),add=document.querySelector(".card__add"),overlayElemModal=document.querySelector(".modal__overlay"),closeCard=document.querySelector(".modal__close-btn");function onEscKeyDown(e){e.keyCode===ESC_KEYCODE&&(document.body.classList.remove("stop-scrolling"),modalElem.classList.add("modal--closed"))}function openModal(){modalElem.classList.contains("modal--closed")&&(document.body.classList.add("stop-scrolling"),modalElem.classList.remove("modal--closed"),document.addEventListener("keydown",onEscKeyDown))}function closeModal(){modalElem.classList.contains("modal--closed")||(document.body.classList.remove("stop-scrolling"),modalElem.classList.add("modal--closed"),document.removeEventListener("keydown",onEscKeyDown))}modalElem&&(add.addEventListener("click",function(e){e.preventDefault(),openModal()}),closeCard.addEventListener("click",closeModal),overlayElemModal.addEventListener("click",closeModal));
